<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Crystal Docs 0.36.1">
<meta name="crystal_docs.project_version" content="0.1.0">
<meta name="crystal_docs.project_name" content="pledge">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="pledge">
  <title>Process - pledge 0.1.0</title>
  <script type="text/javascript">
    CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          pledge
        </a>
      </h1>

      <span class="project-version">
        0.1.0
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class=" current" data-id="pledge/Process" data-name="process">
      <a href="Process.html">Process</a>
      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1 class="type-name">

  <span class="kind">class</span> Process

</h1>


  <ul class="superclass-hierarchy"><li class="superclass"><a href="Process.html">Process</a></li><li class="superclass">Reference</li><li class="superclass">Object</li></ul>

















  <h2>
    <a id="defined-in" class="anchor" href="#defined-in">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Defined in:
  </h2>
  
    
      <a href="https://github.com/chris-huxtable/pledge.cr/blob/v0.1.0/src/pledge/process+pledge.cr#L17" target="_blank">
        pledge/process+pledge.cr
      </a>
    
    <br/>
  







  <h2>
    <a id="class-method-summary" class="anchor" href="#class-method-summary">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Summary
  </h2>
  <ul class="list-summary">
    
      <li class="entry-summary">
        <a href="#pledge(promises:Array(String%7CSymbol)=[&quot;&quot;]ofString%7CSymbol,execpromises:Array(String)?=nil)-class-method" class="signature"><strong>.pledge</strong>(promises : Array(String | Symbol) = [<span class="s">&quot;&quot;</span>] <span class="k">of</span> <span class="t">String</span> <span class="o">|</span> <span class="t">Symbol</span>, execpromises : Array(String)? = <span class="n">nil</span>)</a>
        
          <div class="summary"><p>The current process is forced into a restricted-service operating mode.</p></div>
        
      </li>
    
      <li class="entry-summary">
        <a href="#pledge(*promises:String%7CSymbol)-class-method" class="signature"><strong>.pledge</strong>(*promises : String | Symbol)</a>
        
          <div class="summary"><p>The current process is forced into a restricted-service operating mode.</p></div>
        
      </li>
    
  </ul>







<div class="methods-inherited">
  
    


    


    


  
    


    


    


  
</div>




  <h2>
    <a id="class-method-detail" class="anchor" href="#class-method-detail">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>
    Class Method Detail
  </h2>
  
    <div class="entry-detail" id="pledge(promises:Array(String|Symbol)=[&quot;&quot;]ofString|Symbol,execpromises:Array(String)?=nil)-class-method">
      <div class="signature">
        
        def self.<strong>pledge</strong>(promises : Array(String | Symbol) = [<span class="s">&quot;&quot;</span>] <span class="k">of</span> <span class="t">String</span> <span class="o">|</span> <span class="t">Symbol</span>, execpromises : Array(String)? = <span class="n">nil</span>)

        <a class="method-permalink" href="#pledge(promises:Array(String%7CSymbol)=[&quot;&quot;]ofString%7CSymbol,execpromises:Array(String)?=nil)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The current process is forced into a restricted-service operating mode. A
few subsets are available, roughly described as computation, memory
management, read-write operations on file descriptors, opening of files,
networking. In general, these modes were selected by studying the operation
of many programs using libc and other such interfaces, and setting promises
or execpromises.</p>

<p>A process which attempts a restricted operation is killed with an
uncatchable SIGABRT.</p>

<p>More information is available in the OpenBSD <a href="http://man.openbsd.org/pledge">man pages</a>.</p>

<p>To restrict a process:</p>

<pre><code class="language-crystal"><span class="t">Process</span>.pledge(<span class="n">:stdio</span>, <span class="n">:rpath</span>, <span class="n">:wpath</span>, <span class="n">:flock</span>)
<span class="t">Process</span>.pledge([<span class="s">&quot;stdio&quot;</span>, <span class="s">&quot;rpath&quot;</span>], [<span class="s">&quot;/some/exec/promise&quot;</span>])</code></pre>

<p>To completely restrict a process:</p>

<pre><code class="language-crystal"><span class="t">Process</span>.pledge()</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/chris-huxtable/pledge.cr/blob/v0.1.0/src/pledge/process+pledge.cr#L41" target="_blank">View source</a>]
        
      </div>
    </div>
  
    <div class="entry-detail" id="pledge(*promises:String|Symbol)-class-method">
      <div class="signature">
        
        def self.<strong>pledge</strong>(*promises : String | Symbol)

        <a class="method-permalink" href="#pledge(*promises:String%7CSymbol)-class-method">#</a>
      </div>
      
        <div class="doc">
          
          <p>The current process is forced into a restricted-service operating mode. A
few subsets are available, roughly described as computation, memory
management, read-write operations on file descriptors, opening of files,
networking. In general, these modes were selected by studying the operation
of many programs using libc and other such interfaces, and setting promises
or execpromises.</p>

<p>A process which attempts a restricted operation is killed with an
uncatchable SIGABRT.</p>

<p>More information is available in the OpenBSD <a href="http://man.openbsd.org/pledge">man pages</a>.</p>

<p>To restrict a process:</p>

<pre><code class="language-crystal"><span class="t">Process</span>.pledge(<span class="n">:stdio</span>, <span class="n">:rpath</span>, <span class="n">:wpath</span>, <span class="n">:flock</span>)
<span class="t">Process</span>.pledge([<span class="s">&quot;stdio&quot;</span>, <span class="s">&quot;rpath&quot;</span>], [<span class="s">&quot;/some/exec/promise&quot;</span>])</code></pre>

<p>To completely restrict a process:</p>

<pre><code class="language-crystal"><span class="t">Process</span>.pledge()</code></pre>
        </div>
      
      <br/>
      <div>
        
          [<a href="https://github.com/chris-huxtable/pledge.cr/blob/v0.1.0/src/pledge/process+pledge.cr#L59" target="_blank">View source</a>]
        
      </div>
    </div>
  






</div>

</body>
</html>
